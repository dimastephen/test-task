# Тестовое задание на позицию Junior Backend dev.

## Основной запуск
docker compose up

В мейкфайле есть подготовленный скрипт чек, который отправляет POST на эндпоинт /create/{id} и сохраняет json с токенами в файл. 
Затем этот же json отправляется на рефреш и в теле ответа выводится обновленная пара токенов.

Дополнительно можно вручную протестить Postmanом или curl:
curl -X POST http://localhost:8080/create/{id}
curl -X POST http://localhost:8080/refresh --data {json структура с токенами}

### Дополнительно
Можно поднять отдельно постгрес, и накатить миграции вручную через make local-migration-up,
собрать и запустить приложение локально и так же протестить.

Предпочитаемая система - MacOS. При попытке запустить на Windows возникли проблемы со скриптом мигратора,
скорее всего связанные с разной разметкой строк в двух ОС. Возможно не успею поправить, т.к. доступа к Windows пока что нету.
В данном случае можно вручную дать запрос на создание таблицы в базу.

### Задание
Написать часть сервиса аутентификации.
Два REST маршрута:
- Первый маршрут выдает пару Access, Refresh токенов для пользователя с идентификатором (GUID) указанным в параметре запроса
- Второй маршрут выполняет Refresh операцию на пару Access, Refresh токенов
**Требования:**
Access токен тип JWT, алгоритм SHA512, хранить в базе строго запрещено.
Refresh токен тип произвольный, формат передачи base64, хранится в базе исключительно в виде bcrypt хеша, должен быть защищен от изменения на стороне клиента и попыток повторного использования.
Access, Refresh токены обоюдно связаны, Refresh операцию для Access токена можно выполнить только тем Refresh токеном который был выдан вместе с ним.
Payload токенов должен содержать сведения об ip адресе клиента, которому он был выдан. В случае, если ip адрес изменился, при рефреш операции нужно послать email warning на почту юзера (для упрощения можно использовать моковые данные).

